<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Real Estate Finance Studio</title>
    <meta name="description" content="Modern tools for evaluating 50/40/10 offers and income properties." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  </head>
  <body>
    <div class="app-shell">
      <header class="app-header">
        <div class="eyebrow">Deal Desk</div>
        <h1 class="headline">Real Estate Finance Studio</h1>
        <p class="lead">Dial in 50/40/10 offers, stack them against conventional financing, and pressure-test deals with an investor-friendly analyzer.</p>
      </header>

      <main class="app-main">
        <section class="panel">
          <h2 class="section-title">50/40/10 Offer</h2>
          <div class="kpi-grid">
            <article class="kpi-card">
              <div class="kpi-label">Total Monthly (PITI)</div>
              <div class="kpi-value" data-bind="offer.piti">$—</div>
            </article>
            <article class="kpi-card">
              <div class="kpi-label">Cash to Close</div>
              <div class="kpi-value" data-bind="offer.cashToClose">$—</div>
            </article>
            <article class="kpi-card">
              <div class="kpi-label">Conventional PITI</div>
              <div class="kpi-value" data-bind="offer.conventionalPiti">$—</div>
            </article>
            <article class="kpi-card">
              <div class="kpi-label">Conventional Cash</div>
              <div class="kpi-value" data-bind="offer.conventionalCash">$—</div>
            </article>
          </div>

          <div class="layout-grid">
            <form class="surface stack" id="offerForm">
              <div class="field">
                <label for="price" class="field-label">Property Price</label>
                <div class="field-inline">
                  <input id="price" name="price" type="number" min="0" step="1000" value="500000" />
                  <span class="pill" data-bind="offer.formattedPrice">$500,000</span>
                </div>
              </div>

              <div class="field">
                <div class="field-row">
                  <label for="taxRate" class="field-label">Property Tax Rate (%/yr)</label>
                  <button type="button" class="ghost-btn" data-action="dallas-rate">Dallas 2.23503%</button>
                </div>
                <div class="field-inline">
                  <input id="taxRate" name="taxRate" type="number" min="0" step="0.00001" value="2.23503" />
                  <span class="pill" data-bind="offer.taxMonthly">$— /mo</span>
                </div>
              </div>

              <div class="field">
                <label for="insAnnual" class="field-label">Insurance (annual $)</label>
                <div class="field-inline">
                  <input id="insAnnual" name="insAnnual" type="number" min="0" step="100" />
                  <span class="pill" data-bind="offer.insuranceMonthly">$— /mo</span>
                </div>
                <p class="field-hint">Defaults to 0.8% of the property price until you enter a custom value.</p>
              </div>

              <div class="field">
                <label for="closingPct" class="field-label">Closing Costs (% of price)</label>
                <div class="field-inline">
                  <input id="closingPct" name="closingPct" type="number" min="0" max="20" step="0.1" value="2.5" />
                  <span class="pill" data-bind="offer.closingCash">$—</span>
                </div>
              </div>

              <fieldset class="field">
                <div class="field-row">
                  <legend class="field-label">Loan Structure</legend>
                  <span class="field-hint">1st + 2nd ≤ 100%</span>
                </div>
                <div class="structure-grid">
                  <div class="field">
                    <div class="field-row">
                      <span class="mini-label">1st %</span>
                      <span class="mini-value" data-bind="offer.firstPercentLabel">50%</span>
                    </div>
                    <input id="firstPct" name="firstPct" type="range" min="0" max="100" step="0.1" value="50" />
                    <input id="firstPctNum" name="firstPctNum" type="number" min="0" max="100" step="0.1" value="50" />
                    <span class="field-hint" data-bind="offer.firstAmount">$—</span>
                  </div>
                  <div class="field">
                    <div class="field-row">
                      <span class="mini-label">2nd %</span>
                      <span class="mini-value" data-bind="offer.secondPercentLabel">40%</span>
                    </div>
                    <input id="secondPct" name="secondPct" type="range" min="0" max="100" step="0.1" value="40" />
                    <input id="secondPctNum" name="secondPctNum" type="number" min="0" max="100" step="0.1" value="40" />
                    <span class="field-hint" data-bind="offer.secondAmount">$—</span>
                  </div>
                  <div class="field">
                    <span class="mini-label">Down %</span>
                    <span class="pill" data-bind="offer.downPayment">$—</span>
                  </div>
                </div>
              </fieldset>

              <div class="field-pair">
                <label class="field">
                  <span class="field-label">1st Rate %</span>
                  <input id="firstRate" name="firstRate" type="number" min="0" max="30" step="0.01" value="7.25" />
                </label>
                <label class="field">
                  <span class="field-label">1st Term (years)</span>
                  <input id="firstTerm" name="firstTerm" type="number" min="1" max="40" step="1" value="30" />
                </label>
              </div>

              <div class="field-pair">
                <label class="field">
                  <span class="field-label">2nd Rate %</span>
                  <input id="secondRate" name="secondRate" type="number" min="0" max="30" step="0.01" value="5.5" />
                </label>
                <label class="field">
                  <span class="field-label">2nd Term (years)</span>
                  <input id="secondTerm" name="secondTerm" type="number" min="1" max="40" step="1" value="30" />
                </label>
              </div>

              <div class="field-pair">
                <label class="field field-checkbox">
                  <input id="secondIO" name="secondIO" type="checkbox" />
                  <span>Interest-only 2nd</span>
                </label>
                <label class="field">
                  <span class="field-label">Balloon (years, 0 = none)</span>
                  <input id="balloonYears" name="balloonYears" type="number" min="0" max="40" step="1" value="0" />
                </label>
              </div>

              <fieldset class="surface nested">
                <legend class="field-label">Conventional Comparison</legend>
                <div class="field-pair">
                  <label class="field">
                    <span class="field-label">Down %</span>
                    <input id="convDown" name="convDown" type="number" min="0" max="100" step="0.1" value="20" />
                  </label>
                  <label class="field">
                    <span class="field-label">Rate %</span>
                    <input id="convRate" name="convRate" type="number" min="0" max="30" step="0.01" value="7.25" />
                  </label>
                </div>
                <div class="field-pair">
                  <label class="field">
                    <span class="field-label">Term (yrs)</span>
                    <input id="convTerm" name="convTerm" type="number" min="1" max="40" step="1" value="30" />
                  </label>
                  <label class="field">
                    <span class="field-label">Closing %</span>
                    <input id="convClose" name="convClose" type="number" min="0" max="20" step="0.1" value="2.5" />
                  </label>
                </div>
              </fieldset>
            </form>

            <div class="stack gap-lg">
              <section class="surface">
                <header class="surface-header">
                  <h3>Payment Breakdown</h3>
                  <p class="muted">Track monthly obligations on the blended structure.</p>
                </header>
                <div class="chip-group">
                  <span class="chip">1st (P&I): <strong data-bind="offer.firstPayment">$—</strong></span>
                  <span class="chip">2nd: <strong data-bind="offer.secondPayment">$—</strong></span>
                  <span class="chip">Taxes: <strong data-bind="offer.taxMonthly">$—</strong></span>
                  <span class="chip">Insurance: <strong data-bind="offer.insuranceMonthly">$—</strong></span>
                </div>
                <canvas id="offerPie" height="320"></canvas>
                <footer class="surface-footer">
                  <div>Monthly PITI</div>
                  <div class="surface-total" data-bind="offer.piti">$—</div>
                </footer>
                <p class="surface-note" data-bind="offer.balloonNote"></p>
              </section>

              <section class="surface">
                <header class="surface-header">
                  <h3>Stacked Comparison</h3>
                  <p class="muted">See how 50/40/10 stacks against conventional financing.</p>
                </header>
                <canvas id="offerBars" height="320"></canvas>
              </section>
            </div>
          </div>
        </section>

        <section class="panel" id="dealAnalyzer">
          <h2 class="section-title">Quick Deal Analyzer</h2>
          <p class="section-subhead">Plug in rents, expenses, and financing terms to get an instant read on cash flow and returns.</p>

          <div class="kpi-grid">
            <article class="kpi-card"><div class="kpi-label">Total Cash Needed</div><div class="kpi-value" data-bind="analyzer.totalCashNeeded">$—</div></article>
            <article class="kpi-card"><div class="kpi-label">Gross Monthly Rent</div><div class="kpi-value" data-bind="analyzer.grossRent">$—</div></article>
            <article class="kpi-card"><div class="kpi-label">Monthly Cash Flow</div><div class="kpi-value" data-bind="analyzer.monthlyCashflow">$—</div></article>
            <article class="kpi-card"><div class="kpi-label">Cash-on-Cash Return</div><div class="kpi-value" data-bind="analyzer.cashOnCash">—</div></article>
          </div>

          <div class="layout-grid">
            <form class="surface stack" id="analyzerForm">
              <div class="field">
                <label for="anPrice" class="field-label">Purchase Price</label>
                <div class="field-inline">
                  <input id="anPrice" name="anPrice" type="number" min="0" step="1000" value="350000" />
                  <span class="pill" data-bind="analyzer.formattedPrice">$—</span>
                </div>
              </div>

              <div class="field">
                <label for="anSqft" class="field-label">Square Footage</label>
                <input id="anSqft" name="anSqft" type="number" min="0" step="10" value="1800" />
              </div>

              <div class="field">
                <div class="field-row">
                  <label for="rehabMode" class="field-label">Rehab Budget</label>
                  <span class="pill" data-bind="analyzer.rehabDisplay">$—</span>
                </div>
                <div class="field-inline">
                  <select id="rehabMode" name="rehabMode">
                    <option value="total">Total Cost</option>
                    <option value="perSqft">Cost per Sq Ft</option>
                  </select>
                  <input id="rehabValue" name="rehabValue" type="number" min="0" step="500" value="30000" />
                </div>
              </div>

              <div class="field-pair">
                <label class="field">
                  <span class="field-label">Closing Costs (% of price)</span>
                  <input id="anClosingPct" name="anClosingPct" type="number" min="0" max="20" step="0.1" value="3" />
                </label>
                <label class="field">
                  <span class="field-label">Down Payment %</span>
                  <input id="anDownPct" name="anDownPct" type="number" min="0" max="100" step="0.1" value="20" />
                </label>
              </div>

              <div class="field">
                <div class="field-row">
                  <label class="field-label">Units &amp; Monthly Rent</label>
                  <button type="button" class="ghost-btn" data-action="add-unit">Add Unit</button>
                </div>
                <div id="unitsList" class="unit-stack"></div>
              </div>

              <div class="field-pair">
                <label class="field">
                  <span class="field-label">Monthly Operating Expenses</span>
                  <input id="anMonthlyExpenses" name="anMonthlyExpenses" type="number" min="0" step="50" value="450" />
                </label>
                <label class="field">
                  <span class="field-label">Monthly Utilities</span>
                  <input id="anUtilities" name="anUtilities" type="number" min="0" step="50" value="150" />
                </label>
              </div>

              <div class="field-pair">
                <label class="field">
                  <span class="field-label">Management Fee % of Rent</span>
                  <input id="anMgmtPct" name="anMgmtPct" type="number" min="0" max="30" step="0.1" value="8" />
                </label>
                <label class="field">
                  <span class="field-label">Other Monthly Income</span>
                  <input id="anOtherIncome" name="anOtherIncome" type="number" min="0" step="25" value="0" />
                </label>
              </div>

              <div class="field-pair">
                <label class="field">
                  <span class="field-label">Annual Taxes</span>
                  <input id="anTaxesAnnual" name="anTaxesAnnual" type="number" min="0" step="100" value="5200" />
                </label>
                <label class="field">
                  <span class="field-label">Annual Insurance</span>
                  <input id="anInsAnnual" name="anInsAnnual" type="number" min="0" step="100" value="1800" />
                </label>
              </div>

              <div class="field-pair">
                <label class="field">
                  <span class="field-label">Other Annual Expenses</span>
                  <input id="anOtherAnnual" name="anOtherAnnual" type="number" min="0" step="100" value="600" />
                </label>
                <label class="field">
                  <span class="field-label">Vacancy Allowance %</span>
                  <input id="anVacancyPct" name="anVacancyPct" type="number" min="0" max="100" step="0.5" value="5" />
                </label>
              </div>

              <div class="field-pair">
                <label class="field">
                  <span class="field-label">Interest Rate %</span>
                  <input id="anRate" name="anRate" type="number" min="0" max="30" step="0.01" value="6.75" />
                </label>
                <label class="field">
                  <span class="field-label">Amortization (years)</span>
                  <input id="anAmortYears" name="anAmortYears" type="number" min="1" max="40" step="1" value="30" />
                </label>
              </div>
            </form>

            <div class="stack gap-lg">
              <section class="surface">
                <header class="surface-header">
                  <h3>Deal Snapshot</h3>
                  <p class="muted">A quick look at capital needs and project scale.</p>
                </header>
                <dl class="stat-grid">
                  <div><dt>Purchase Price</dt><dd data-bind="analyzer.price">$—</dd></div>
                  <div><dt>Rehab Budget</dt><dd data-bind="analyzer.rehab">$—</dd></div>
                  <div><dt>Closing Costs</dt><dd data-bind="analyzer.closingCosts">$—</dd></div>
                  <div><dt>Total Project Cost</dt><dd data-bind="analyzer.projectCost">$—</dd></div>
                  <div><dt>Total Cash Needed</dt><dd data-bind="analyzer.totalCashNeeded">$—</dd></div>
                  <div><dt>Loan Amount</dt><dd data-bind="analyzer.loanAmount">$—</dd></div>
                </dl>
              </section>

              <section class="surface">
                <header class="surface-header">
                  <h3>Income &amp; Expense Breakdown</h3>
                  <p class="muted">Understand monthly performance and returns.</p>
                </header>
                <dl class="stat-grid">
                  <div><dt>Gross Monthly Rent</dt><dd data-bind="analyzer.grossRent">$—</dd></div>
                  <div><dt>Other Monthly Income</dt><dd data-bind="analyzer.otherIncome">$—</dd></div>
                  <div><dt>Vacancy Loss</dt><dd data-bind="analyzer.vacancyLoss">$—</dd></div>
                  <div><dt>Effective Monthly Income</dt><dd data-bind="analyzer.effectiveIncome">$—</dd></div>
                  <div><dt>Management Fee</dt><dd data-bind="analyzer.managementFee">$—</dd></div>
                  <div><dt>Monthly Operating Expenses</dt><dd data-bind="analyzer.operatingExpenses">$—</dd></div>
                  <div><dt>Monthly NOI</dt><dd data-bind="analyzer.noiMonthly">$—</dd></div>
                  <div><dt>Annual NOI</dt><dd data-bind="analyzer.noiAnnual">$—</dd></div>
                  <div><dt>Monthly Mortgage</dt><dd data-bind="analyzer.mortgagePayment">$—</dd></div>
                  <div><dt>Monthly Cash Flow</dt><dd data-bind="analyzer.monthlyCashflow">$—</dd></div>
                  <div><dt>Cap Rate</dt><dd data-bind="analyzer.capRate">—</dd></div>
                  <div><dt>Cash-on-Cash Return</dt><dd data-bind="analyzer.cashOnCash">—</dd></div>
                  <div><dt>DSCR</dt><dd data-bind="analyzer.dscr">—</dd></div>
                </dl>
              </section>
            </div>
          </div>
        </section>
      </main>

      <footer class="app-footer">
        Built with modern vanilla JS modules, optimized for Tauri offline use.
      </footer>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
